
数据结构：string，list ，hash， set， zset等
常用命令：set get keys hset hget rpush llen lpop rpop
Redis核心原理：
1、redis为什么单线程还能这么快
它所有的数据都在内存中
所有运算都是内存级别运算
单线程必满了多线程的切换性能消耗问题
2、redis单线程如何处理那么多的并发客户端连接
redis的   io多路复用  ：redis利用epoll来实现io多路复用，将连接信息和时间放到队列中
3、模型图
https://www.processon.com/diagraming/5ca6cdf6e4b00f8893f5e884


redis持久化
1、RDB快照：比如60秒内至少有1000个key被改动，自动保存一次数据集到磁盘
2、AOF：每执行一个改变数据集的命令时，如set，这个命令就被追加到aof文件的末尾
aop重写：把aof文件中的重复对某个key的操作进行筛选，只保留最新的那一个
3、redis4.0之后支持两种方式混合使用，开启命令：# aof-use-rdb-preamble yes

缓存淘汰策略
最少使用的缓存会被清除，比如设置缓存的生存时间

缓存问题
一、缓存穿透
描述：
       缓存穿透是指缓存和数据库中都没有的数据，而用户不断发起请求，如发起为id为“-1”的数据或id为特别大不存在的数据。这时的用户很可能是攻击者，攻击会导致数据库压力过大。

解决方案：
        接口层增加校验，如用户鉴权校验，id做基础校验，id<=0的直接拦截；
        从缓存取不到的数据，在数据库中也没有取到，这时也可以将key-value对写为key-null，缓存有效时间可以设置短点，如30秒（设置太长会导致正常情况也没法使用）。这样可以防止攻击用户反复用同一个id暴力攻击
 
二、缓存击穿
描述：
      缓存击穿是指缓存中没有但数据库中有的数据（一般是缓存时间到期），这时由于并发用户特别多，同时读缓存没读到数据，又同时去数据库去取数据，引起数据库压力瞬间增大，造成过大压力
解决方案：
设置热点数据永远不过期。
加互斥锁

三、缓存雪崩
描述：
      缓存雪崩是指缓存中数据大批量到过期时间，而查询数据量巨大，引起数据库压力过大甚至down机。和缓存击穿不同的是，        缓存击穿指并发查同一条数据，缓存雪崩是不同数据都过期了，很多数据都查不到从而查数据库。
解决方案：
        缓存数据的过期时间设置随机，防止同一时间大量数据过期现象发生。
        如果缓存数据库是分布式部署，将热点数据均匀分布在不同搞得缓存数据库中。
        设置热点数据永远不过期。


